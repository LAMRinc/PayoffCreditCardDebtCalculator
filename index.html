<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Credit Card Payoff Calculator</title>

<!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5315525753847749" crossorigin="anonymous"></script>

<!-- Fonts & Libraries -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body { font-family: 'Roboto', sans-serif; background: #f7f9fc; color: #333; margin:0; padding:0; }
.container { max-width:700px; margin:20px auto; background:#fff; padding:30px; border-radius:10px; box-shadow:0 4px 15px rgba(0,0,0,0.1); }
h1 { text-align:center; color:#0073e6; }
label { display:block; margin-top:15px; font-weight:bold; }
input { width:100%; padding:10px; margin-top:5px; border-radius:5px; border:1px solid #ccc; box-sizing:border-box; }
button { width:100%; padding:15px; background:#0073e6; color:#fff; border:none; border-radius:5px; font-size:16px; margin-top:10px; cursor:pointer; }
button:hover { background:#005bb5; }
.instructions, .guides { margin-top:20px; background:#f0f4ff; padding:15px; border-radius:8px; font-size:14px; }
.results { margin-top:30px; background:#e6f0ff; padding:20px; border-radius:8px; display:flex; flex-wrap:wrap; gap:20px; justify-content:space-between; }
.results div { flex:1 1 300px; }
canvas { width:100%; max-width:100%; height:auto; }
.ad { margin:20px 0; text-align:center; }
@media(max-width:768px){ .results{flex-direction:column;} }
</style>
</head>

<body>

<div class="container">

  <!-- Top Ad -->
  <div class="ad">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-5315525753847749"
         data-ad-slot="6887447671"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <h1>Credit Card Payoff Calculator</h1>

  <div class="instructions">
    <strong>How it works:</strong>
    <ul>
      <li>Enter your current credit card balance.</li>
      <li>Enter your card APR (interest rate).</li>
      <li>Enter your minimum monthly payment.</li>
      <li>Enter the date you want to be debt-free by.</li>
      <li>Click "Calculate" to see the required monthly payment and extra payment needed.</li>
    </ul>
  </div>

  <form id="calculatorForm">
    <label for="balance">Current Balance ($)</label>
    <input type="number" id="balance" required>

    <label for="apr">APR (%)</label>
    <input type="number" step="0.01" id="apr" required>

    <label for="minPayment">Minimum Payment ($)</label>
    <input type="number" step="0.01" id="minPayment" required>

    <label for="payoffDate">Desired Payoff Date</label>
    <input type="date" id="payoffDate" required>

    <button type="submit">Calculate</button>
  </form>

  <div style="margin-top:20px;">
    <label for="budgetPayment">I can pay ($/month)</label>
    <input type="number" id="budgetPayment" step="0.01">
    <button type="button" id="calcBudget">Calculate Payoff Date</button>
    <p id="budgetResult" style="font-weight:bold;"></p>
  </div>

  <div class="results" id="results" style="display:none;">
    <div>
      <p id="monthlyPayment"></p>
      <p id="extraPayment"></p>
      <p id="totalInterest"></p>
      <p id="funHook" style="margin-top:10px; font-weight:bold; color:#0073e6;"></p>
      <button id="downloadPDF">Download Plan as PDF</button>
      <button id="sharePlan">Share Your Plan</button>
    </div>
    <div>
      <canvas id="payoffChart"></canvas>
      <canvas id="stackedChart"></canvas>
    </div>
  </div>

  <div class="guides">
    <h2>Tips & Strategies</h2>
    <ul>
      <li>Pay more than the minimum to reduce interest.</li>
      <li>Use the Snowball method to pay off smallest debts first.</li>
      <li>Use the Avalanche method to pay off highest interest first.</li>
      <li>Negotiate lower APR with your credit card company.</li>
    </ul>
    <button id="learnMoreTips" style="margin-top:10px;">Learn More</button>
  </div>

  <!-- Bottom Ad -->
  <div class="ad">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-5315525753847749"
         data-ad-slot="3546968462"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

</div>

<script>
window.addEventListener('load', () => {
  const form = document.getElementById('calculatorForm');
  const resultsDiv = document.getElementById('results');
  const monthlyPaymentEl = document.getElementById('monthlyPayment');
  const extraPaymentEl = document.getElementById('extraPayment');
  const totalInterestEl = document.getElementById('totalInterest');
  const funHookEl = document.getElementById('funHook');

  let lineChart, stackedChart;

  form.addEventListener('submit', function(e){
    e.preventDefault();
    const balance = parseFloat(document.getElementById('balance').value);
    const apr = parseFloat(document.getElementById('apr').value)/100;
    const minPayment = parseFloat(document.getElementById('minPayment').value);
    const payoffDate = new Date(document.getElementById('payoffDate').value);
    const today = new Date();
    const months = Math.max(1, Math.ceil((payoffDate.getFullYear() - today.getFullYear())*12 + (payoffDate.getMonth() - today.getMonth())));
    const monthlyRate = apr/12;
    const monthlyPayment = (monthlyRate*balance)/(1 - Math.pow(1+monthlyRate, -months));
    const extraPayment = monthlyPayment - minPayment;

    let remaining = balance;
    let totalInterest = 0;
    const balanceData = [];
    const principalData = [];
    const interestData = [];

    for(let i=0;i<months;i++){
      const interest = remaining*monthlyRate;
      const principal = monthlyPayment - interest;
      totalInterest += interest;
      remaining -= principal;
      balanceData.push(remaining>0?remaining:0);
      principalData.push(principal);
      interestData.push(interest);
    }

    monthlyPaymentEl.textContent = `Required Monthly Payment: $${monthlyPayment.toFixed(2)}`;
    extraPaymentEl.textContent = `Extra Payment Above Minimum: $${extraPayment.toFixed(2)}`;
    totalInterestEl.textContent = `Total Interest Paid: $${totalInterest.toFixed(2)}`;
    funHookEl.textContent = `Paying just $${extraPayment.toFixed(2)} extra/month can get you debt-free faster!`;

    const labels = balanceData.map((_,i)=>`Month ${i+1}`);

    if(lineChart) lineChart.destroy();
    const ctxLine = document.getElementById('payoffChart').getContext('2d');
    lineChart = new Chart(ctxLine,{
      type:'line',
      data:{ labels:labels, datasets:[{ label:'Remaining Balance', data:balanceData, borderColor:'#0073e6', fill:true, backgroundColor:'rgba(0,115,230,0.1)', tension:0.3 }] },
      options:{ responsive:true, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true}}}
    });

    if(stackedChart) stackedChart.destroy();
    const ctxStack = document.getElementById('stackedChart').getContext('2d');
    stackedChart = new Chart(ctxStack,{
      type:'bar',
      data:{
        labels:labels,
        datasets:[
          { label:'Principal', data:principalData, backgroundColor:'#0073e6' },
          { label:'Interest', data:interestData, backgroundColor:'#ff9800' }
        ]
      },
      options:{
        responsive:true,
        plugins:{legend:{position:'top'}},
        scales:{x:{stacked:true}, y:{stacked:true, beginAtZero:true}}
      }
    });

    resultsDiv.style.display='flex';
  });

  document.getElementById('calcBudget').addEventListener('click', ()=>{
    const balance = parseFloat(document.getElementById('balance').value);
    const apr = parseFloat(document.getElementById('apr').value)/100;
    const monthlyRate = apr/12;
    let monthlyPay = parseFloat(document.getElementById('budgetPayment').value);
    if(monthlyPay <= balance*monthlyRate){ alert("Monthly payment too low to ever pay off debt!"); return; }
    let remaining = balance; let months = 0;
    while(remaining>0){ remaining = remaining + remaining*monthlyRate - monthlyPay; months++; }
    const today = new Date();
    const payoffDate = new Date(today.getFullYear(), today.getMonth()+months, today.getDate());
    document.getElementById('budgetResult').textContent = `You will be debt-free by: ${payoffDate.toDateString()}`;
  });

  document.getElementById('downloadPDF').addEventListener('click', ()=>{
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(16); doc.text("Credit Card Payoff Plan", 20, 20);
    doc.setFontSize(12);
    doc.text(monthlyPaymentEl.textContent, 20, 40);
    doc.text(extraPaymentEl.textContent, 20, 50);
    doc.text(totalInterestEl.textContent, 20, 60);
    ['payoffChart','stackedChart'].forEach((id, idx)=>{
      const canvas = document.getElementById(id);
      const imgData = canvas.toDataURL('image/png');
      doc.addImage(imgData,'PNG',15,70 + idx*100,180,90);
    });
    doc.save('PayoffPlan.pdf');
  });

  document.getElementById('sharePlan').addEventListener('click', ()=>{
    const balance = document.getElementById('balance').value;
    const apr = document.getElementById('apr').value;
    const minPayment = document.getElementById('minPayment').value;
    const payoffDate = document.getElementById('payoffDate').value;
    const shareURL = `${window.location.href.split('?')[0]}?balance=${balance}&apr=${apr}&minPayment=${minPayment}&payoffDate=${payoffDate}`;
    prompt("Copy this link to share your plan:", shareURL);
  });

  const learnBtn = document.getElementById('learnMoreTips');
  if(learnBtn){ learnBtn.addEventListener('click', () => { window.location.href = 'tips.html'; }); }

  const params = new URLSearchParams(window.location.search);
  if(params.has('balance')) document.getElementById('balance').value = params.get('balance');
  if(params.has('apr')) document.getElementById('apr').value = params.get('apr');
  if(params.has('minPayment')) document.getElementById('minPayment').value = params.get('minPayment');
  if(params.has('payoffDate')) document.getElementById('payoffDate').value = params.get('payoffDate');
  if(params.has('balance')) form.dispatchEvent(new Event('submit'));
});
</script>

</body>
</html>
